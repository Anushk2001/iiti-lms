{% extends 'user.html' %} {% block sidebar_and_navbar %}
<!-- ============================================================== -->
<!-- End Left Sidebar - style you can find in sidebar.scss  -->
<!-- ============================================================== -->
<!-- ============================================================== -->
<!-- Page wrapper  -->
<!-- ============================================================== -->
<div class="page-wrapper">
	<!-- ============================================================== -->
	<!-- Bread crumb and right sidebar toggle -->
	<!-- ============================================================== -->
	<div class="page-breadcrumb">
		<div class="row">
			<div class="col-12 d-flex no-block align-items-center">
				<h4 class="page-title">Tables</h4>
				<div class="ml-auto text-right">
					<nav aria-label="breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item">
								<a href="#">Home</a>
							</li>
							<li
								class="breadcrumb-item active"
								aria-current="page"
							>
								Library
							</li>
						</ol>
					</nav>
				</div>
			</div>
		</div>
	</div>
	<!-- ============================================================== -->
	<!-- End Bread crumb and right sidebar toggle -->
	<!-- ============================================================== -->
	<!-- ============================================================== -->
	<!-- Container fluid  -->
	<!-- ============================================================== -->
	<div class="container-fluid">
		<!-- ============================================================== -->
		<!-- Start Page Content -->
		<!-- ============================================================== -->
		<div class="row">
			<div class="col-12">
				<div class="card">
					<div class="card-body">
						<h3 class="card-title m-b-0">Your Fines History</h3>
					</div>

					<div class="table-responsive text-center">
						<table
							id="zero_config"
							class="table table-striped table-bordered"
						>
							{% if data != () %}
							<thead>
								<tr>
									<th scope="col">ISBN</th>
									<th scope="col">Borrow Date</th>
									<th scope="col">Book Status</th>
									<th scope="col">Return Date</th>
									<th scope="col">Fines</th>
								</tr>
							</thead>
							<tbody>
								{% for value in data %}
								<tr>
									<td>{{ value[0] }}</td>
									<td>{{ value[1] }}</td>
									{% if value[2]==1 %}
									<td>Returned</td>
									<td>{{value[3]}}</td>
									{% if value[3] != None and value[1] != None
									(value[3]-value[1]).days>=10 %}
									<td>{{(value[3]-value[1]).days*2}}</td>
									{%else %}
									<td>0</td>
									{%endif %} {% else %}
									<td>Not Returned</td>
									<td>--</td>
									{% if (date-value[1]).days>=10 %}
									<td>{{(date-value[1]).days*2}}</td>
									{%else %}
									<td>0</td>
									{%endif %} {% endif %}
								</tr>
								{% endfor %}
							</tbody>

							{% else %}
							<div class="card-body">
								<h3>You have no history for our Library</h3>
							</div>
							{% endif %}
						</table>
					</div>
				</div>
			</div>
		</div>
		<!-- ============================================================== -->
		<!-- End PAge Content -->
		<!-- ============================================================== -->
		<!-- ============================================================== -->
		<!-- Right sidebar -->
		<!-- ============================================================== -->
		<!-- .right-sidebar -->
		<!-- ============================================================== -->
		<!-- End Right sidebar -->
		<!-- ============================================================== -->
	</div>
	<!-- ============================================================== -->
	<!-- End Container fluid  -->
	<!-- ============================================================== -->
	<!-- ============================================================== -->
	<!-- footer -->
	<!-- ============================================================== -->
	<footer class="footer text-center">
		All Rights Reserved by IITI - LMS.
	</footer>
	<!-- ============================================================== -->
	<!-- End footer -->
	<!-- ============================================================== -->
</div>
<!-- ============================================================== -->
<!-- End Page wrapper  -->
<!-- ============================================================== -->

<!-- ============================================================== -->
<!-- End Wrapper -->
<!-- ============================================================== -->
<!-- ============================================================== -->
<!-- All Jquery -->
<!-- ============================================================== -->
<script src="assets/libs/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap tether Core JavaScript -->
<script src="assets/libs/popper.js/dist/umd/popper.min.js"></script>
<script src="assets/libs/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- slimscrollbar scrollbar JavaScript -->
<script src="assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
<script src="assets/extra-libs/sparkline/sparkline.js"></script>
<!--Wave Effects -->
<script src="dist/js/waves.js"></script>
<!--Menu sidebar -->
<script src="dist/js/sidebarmenu.js"></script>
<!--Custom JavaScript -->
<script src="dist/js/custom.min.js"></script>
<!-- this page js -->
<script src="assets/extra-libs/multicheck/datatable-checkbox-init.js"></script>
<script src="assets/extra-libs/multicheck/jquery.multicheck.js"></script>
<script src="assets/extra-libs/DataTables/datatables.min.js"></script>
<script>
	/****************************************
	 *       Basic Table                   *
	 ****************************************/
	$("#zero_config").DataTable();
</script>
{% endblock sidebar_and_navbar %}
